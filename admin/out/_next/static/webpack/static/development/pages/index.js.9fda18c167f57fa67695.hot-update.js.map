{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.9fda18c167f57fa67695.hot-update.js","sources":["webpack:///./fetchers/targets.js"],"sourcesContent":["import httpFetch from '../fetch';\r\nimport config from '../config';\r\nimport { getInstalledCSRF } from '../setup';\r\n\r\nexport async function fetchTargets(setTargets, setErrorMessage) {\r\n  try {\r\n    const result = await httpFetch(config.apiPrefix + '/resources/targets.json');\r\n    if (result.ok) {\r\n      const targets = await result.json();\r\n      for (let i = 0; i < targets.length; ++i) {\r\n        const target = targets[i];\r\n        const split = target.url.split('://');\r\n        target.kind = split[0];\r\n        target.path = split[1];\r\n      }\r\n      setTargets(targets);\r\n    } else {\r\n      setErrorMessage('Completed fetch but got bad status from resource: ' + result.status);\r\n    }\r\n  } catch (err) {\r\n    setErrorMessage('Could not complete fetch: ' + err);\r\n  }\r\n}\r\n\r\nexport async function fetchTargetDelete(url, setErrorMessage) {\r\n  try {\r\n    const apiURL = config.apiPrefix + '/resources/target/delete.json?url=' + url;\r\n    const resp = await httpFetch(apiURL, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-CSRF-Token': getInstalledCSRF(),\r\n      },\r\n      credentials: 'include',\r\n    });\r\n    if (resp.ok) {\r\n      const targets = await result.json();\r\n      for (let i = 0; i < targets.length; ++i) {\r\n        const target = targets[i];\r\n        const split = target.url.split('://');\r\n        target.kind = split[0];\r\n        target.path = split[1];\r\n      }\r\n      setTargets(targets);\r\n    } else {\r\n      setErrorMessage('Completed fetch but got bad status from resource: ' + resp.status);\r\n    }\r\n  } catch (err) {\r\n    setErrorMessage('Could not complete fetch: ' + err);\r\n    return;\r\n  }\r\n  try {\r\n    const data = await resp.json();\r\n    return data;\r\n  } catch (err) {\r\n    setErrorMessage('Could not parse JSON: ' + err);\r\n  }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AACA;;;;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAXA;AAAA;AACA;AADA;AAaA;AACA;AAdA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAgBA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAoBA;AAAA;AAAA;AACA;;;;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAEA;AAFA;AAAA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AANA;AACA;AAJA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAYA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAnBA;AAAA;AACA;AADA;AAqBA;AACA;AAtBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAwBA;AAxBA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AA4BA;AA5BA;AACA;AADA;AAAA;AAAA;AA+BA;AACA;AAhCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;A","sourceRoot":""}
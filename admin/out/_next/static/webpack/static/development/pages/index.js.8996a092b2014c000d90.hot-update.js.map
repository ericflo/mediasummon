{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.8996a092b2014c000d90.hot-update.js","sources":["webpack:///./fetchers/userconfig.js"],"sourcesContent":["import httpFetch from '../fetch';\r\nimport config from '../config';\r\nimport { getInstalledCSRF } from '../setup';\r\nimport { throwMessageFromJSONError, withAuthHeaders, encodeQuery } from './common';\r\n\r\nexport async function fetchCurrentUserConfig() {\r\n  try {\r\n    const result = await httpFetch(config.apiPrefix + '/resources/config.json', {\r\n      headers: withAuthHeaders({'Content-Type': 'application/json'}),\r\n    });\r\n    if (result.ok) {\r\n      return await result.json();\r\n    } else {\r\n      await throwMessageFromJSONError(result);\r\n    }\r\n  } catch (err) {\r\n    throw 'Could not complete fetch: ' + err;\r\n  }\r\n}\r\n\r\nexport async function fetchUpdateSecrets(service, params) {\r\n  params = params || {};\r\n  params.service = service;\r\n  const resp = await httpFetch(config.apiPrefix + '/resources/config/secrets.json', {\r\n    method: 'POST',\r\n    headers: withAuthHeaders({\r\n      'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\r\n      'X-CSRF-Token': getInstalledCSRF(),\r\n    }),\r\n    credentials: 'include',\r\n    body: encodeQuery(params),\r\n  });\r\n  if (!resp.ok) {\r\n    await throwMessageFromJSONError(resp);\r\n  }\r\n  const data = await resp.json();\r\n  return data;\r\n}\r\n\r\nexport async function fetchAppAuth() {\r\n  try {\r\n    const result = await httpFetch(config.apiPrefix + '/resources/config/appauth.json', {\r\n      headers: withAuthHeaders({'Content-Type': 'application/json'}),\r\n    });\r\n    if (result.ok) {\r\n      return await result.json();\r\n    } else {\r\n      await throwMessageFromJSONError(result);\r\n    }\r\n  } catch (err) {\r\n    throw 'Could not complete fetch: ' + err;\r\n  }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;;;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AADA;AACA;AAHA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAeA;AAAA;AAAA;AACA;;;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAPA;AACA;AAJA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAeA;AAfA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AAmBA;AAAA;AAAA;AACA;;;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AADA;AACA;AAHA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;A","sourceRoot":""}